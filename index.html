<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Automatic Battle RPG - 3v3 Skill System</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/config.js" defer></script>
    <script src="js/preparation.js" defer></script>
    <script src="js/utils.js" defer></script>
    <script src="js/skills.js" defer></script>
    <script src="js/heroes.js" defer></script>
    <script src="js/monsterTemplate.js" defer></script>
    <script src="js/equipment.js" defer></script>
    <script src="js/UI.js" defer></script>
    <script src="js/gameLoop.js" defer></script>
  </head>
  <body>
    <!-- DIFFICULTY SELECTION MODAL -->
    <div id="difficulty-modal" class="modal active">
      <div class="modal-content difficulty-selector">
        <h2>âš” Select Difficulty</h2>
        <p>Choose your challenge level. Cannot be changed later!</p>
        <div class="difficulty-options">
          <button class="difficulty-btn" onclick="setDifficulty('RELAX')">
            <strong>ğŸ˜Œ Relax</strong>
            <small>Slow monster growth, gentle difficulty</small>
          </button>
          <button class="difficulty-btn" onclick="setDifficulty('NORMAL')">
            <strong>âš” Normal</strong>
            <small>Balanced gameplay experience</small>
          </button>
          <button class="difficulty-btn" onclick="setDifficulty('FOCUS')">
            <strong>ğŸ’¥ Focus</strong>
            <small>Fast monster growth, intense challenge</small>
          </button>
        </div>
      </div>
    </div>

    <div class="game-container">
      <div class="game">
        <h1>âš” Area > Round > Set Battle System</h1>
        <div id="stage-info" class="stage-info">Area 1 - Round 1 - Set 1</div>
        
        <div class="battlefield-container">
          <!-- GRID BATTLEFIELD -->
          <div id="battlefield-grid" class="battlefield-grid">
            <div id="heroes" class="heroes-group"></div>
            <div id="monsters" class="monsters-group"></div>
          </div>
          
          <!-- BATTLE LOG SIDEBAR -->
          <div class="battle-log-sidebar">
            <button id="log-toggle-btn" class="log-toggle">ğŸ“‹</button>
            <div id="battle-log-panel" class="battle-log-panel">
              <div class="log-header">
                <span>Battle Log</span>
                <button class="log-close" onclick="toggleBattleLog()">âœ•</button>
              </div>
              <div id="battle-log" class="log"></div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button id="start-btn" onclick="startBattle()">Start Battle</button>
          <button id="pause-btn" onclick="togglePause()" style="display:none;">â¸ Pause (SPACE)</button>
          <button id="next-round-btn" style="display:none;" onclick="nextRound()">â¡ Next Round</button>
        </div>
      </div>

      <!-- PROFILE TAB (Character Stats, Equipment, Skills) -->
      <div id="profile-tab" class="profile-tab">
        <div class="profile-header">
          <h3 id="profile-name">Select Hero</h3>
          <button class="profile-close" onclick="closeProfile()">âœ•</button>
        </div>
        
        <div class="profile-content">
          <!-- STATS VIEW -->
          <div id="stats-view" class="profile-section active">
            <h4>ğŸ“Š Stats</h4>
            <div class="stats-grid">
              <div class="stat-item">
                <label>HP</label>
                <span id="stat-hp">0</span>
              </div>
              <div class="stat-item">
                <label>STA</label>
                <span id="stat-sta">0</span>
              </div>
              <div class="stat-item">
                <label>MANA</label>
                <span id="stat-mana">0</span>
              </div>
              <div class="stat-item">
                <label>PATK</label>
                <span id="stat-patk">0</span>
              </div>
              <div class="stat-item">
                <label>MATK</label>
                <span id="stat-matk">0</span>
              </div>
              <div class="stat-item">
                <label>PDEF</label>
                <span id="stat-pdef">0</span>
              </div>
              <div class="stat-item">
                <label>MDEF</label>
                <span id="stat-mdef">0</span>
              </div>
              <div class="stat-item">
                <label>CRIT</label>
                <span id="stat-ccrit">0%</span>
              </div>
            </div>

            <div class="buy-stats-section">
              <h4>ğŸ’° Buy Stats (EXP: <span id="hero-exp">0</span>)</h4>
              <div class="buy-stats-grid" id="buy-stats-grid">
                <!-- Generated dynamically -->
              </div>
            </div>
          </div>

          <!-- EQUIPMENT VIEW -->
          <div id="equipment-view" class="profile-section">
            <h4>âš” Equipment (7 Slots)</h4>
            <div class="equipped-items" id="equipped-items">
              <!-- Generated dynamically -->
            </div>
            <h4>ğŸ“¦ Equipment Inventory</h4>
            <div class="equipment-inventory" id="equipment-inventory">
              <!-- Generated dynamically -->
            </div>
          </div>

          <!-- SKILLS VIEW -->
          <div id="skills-view" class="profile-section">
            <h4>ğŸ’« Active Skills (4 Slots)</h4>
            <div class="active-skills" id="active-skills">
              <!-- Generated dynamically -->
            </div>
            <h4>ğŸ“š Available Skills</h4>
            <div class="available-skills" id="available-skills">
              <!-- Generated dynamically -->
            </div>
          </div>
        </div>

        <!-- PROFILE SECTIONS SWITCHER -->
        <div class="profile-tabs">
          <button class="profile-tab-btn active" onclick="switchProfileView('stats')">ğŸ“Š Stats</button>
          <button class="profile-tab-btn" onclick="switchProfileView('equipment')">âš” Equipment</button>
          <button class="profile-tab-btn" onclick="switchProfileView('skills')">ğŸ’« Skills</button>
        </div>
      </div>

      <!-- CHOICE MODALS (Equipment/Skill Rewards) -->
      <div id="reward-choice-modal" class="modal">
        <div class="modal-content">
          <h2 id="choice-title"></h2>
          <div id="choice-items" class="choice-grid">
            <!-- Generated dynamically -->
          </div>
        </div>
      </div>

      <!-- TRANSITION MODAL (Round/Area Pause) -->
      <div id="transition-modal" class="modal">
        <div class="modal-content">
          <h2 id="transition-title"></h2>
          <div id="transition-rewards">
            <p id="reward-text"></p>
            <div id="reward-items"></div>
          </div>
          <button class="btn-continue" onclick="continueFromTransition()">â¡ Continue</button>
        </div>
      </div>

      <!-- GAME OVER MODAL -->
      <div id="gameover-modal" class="modal">
        <div class="modal-content">
          <h2>ğŸ’€ GAME OVER</h2>
          <p id="gameover-text"></p>
          <button class="btn-continue" onclick="resetGame()">ğŸ”„ Restart</button>
        </div>
      </div>
    </div>
  </body>
</html>
